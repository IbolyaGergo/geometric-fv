\documentclass[tikz,border=2pt]{standalone}

% Needed for standalone compilation of fig/*.tex
\IfFileExists{../preamble.tex}
{\input{../preamble.tex}}% If compiling *.tex directly
{\input{preamble.tex}}% If compiling main.tex

\IfFileExists{tikz-shapes.tex}
{\input{tikz-shapes.tex}}
{\input{fig/tikz-shapes.tex}}

\pagestyle{empty}

\begin{document}%
\begin{tikzpicture}[x=2cm,y=2cm]%
    \useasboundingbox (-1.5*\dx, -.2*\dx) rectangle (3*\dx, 1.1*\dt);%

    % Line at t^n
    \draw[->] (-1.5*\dx,0) node[left] {$t^n$} --  (2.5*\dx,0);%
    % Line at t^{n+1}
    \draw[->] (-1.5*\dx,\dt) node[left] {$t^{n+1}$} -- (2.5*\dx,\dt);%

    % Draw ticks
    \foreach \pos in {-\dx,0,\dx,2*\dx} {%
        \DrawTick{\pos,0};
        \DrawTick[green]{\pos,\dt};
        \DrawTick[green]{\pos-\dt,0};

        % Backtrace
        \draw[dashed,-{Stealth}] (\pos,\dt) -- (\pos-\dt,0);

    }%

    % Avgs
    \foreach \pos / \idx in {
             -\dx / {i-1},
             0   / {i},
             \dx  / {i+1}
    } {
        \node[avg text] at (\pos+0.5*\dx,-.2) {$u_\idx^{n}$};
        \DrawAvg[avg dot]{\pos+.5*\dx,0}

        \node[new avg text] at (\pos+0.5*\dx,-.2+\dt) {$u_\idx^{n+1}$};
        \DrawAvg[new avg dot]{\pos+.5*\dx,\dt}
    }
\end{tikzpicture}
\end{document}
